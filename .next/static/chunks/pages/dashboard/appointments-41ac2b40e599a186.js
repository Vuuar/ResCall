(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{4768:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/appointments",function(){return t(8410)}])},8410:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var n=t(1527),r=t(959),a=t(8391),l=t.n(a),i=t(8061),o=t.n(i),c=t(8896),d=t(2852),m=t(4995),x=t(390);function u(e){let{user:s}=e,t=(0,c.useRouter)(),{status:a}=t.query,[i,u]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[f,v]=(0,r.useState)("string"==typeof a?a:"all");(0,r.useEffect)(()=>{s&&w()},[s,f]),(0,r.useEffect)(()=>{"string"==typeof a&&v(a)},[a]);let w=async()=>{p(!0);try{let e=d.O.from("appointments").select("*").eq("professional_id",null==s?void 0:s.id).order("start_time",{ascending:!1});f&&"all"!==f&&(e=e.eq("status",f));let{data:t,error:n}=await e;if(n)throw n;u(t||[])}catch(e){console.error("Error fetching appointments:",e)}finally{p(!1)}},j=e=>{v(e),t.push({pathname:t.pathname,query:"all"===e?{}:{status:e}},void 0,{shallow:!0})},g=e=>{switch(e){case"scheduled":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=e=>{switch(e){case"scheduled":return"Planifi\xe9";case"confirmed":return"Confirm\xe9";case"completed":return"Termin\xe9";case"cancelled":return"Annul\xe9";case"no_show":return"Absence";default:return e}};return s?(0,n.jsxs)(m.Z,{user:s,children:[(0,n.jsx)(l(),{children:(0,n.jsx)("title",{children:"Rendez-vous | WhatsApp Booking Assistant"})}),(0,n.jsxs)("div",{className:"py-6",children:[(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-secondary-900",children:"Rendez-vous"}),(0,n.jsx)("div",{className:"mt-4 md:mt-0",children:(0,n.jsxs)(o(),{href:"/dashboard/appointments/calendar",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,n.jsx)("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Vue calendrier"]})})]})}),(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-6",children:[(0,n.jsx)("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-secondary-700",children:"Filtrer par statut:"}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("select",{value:f,onChange:e=>j(e.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-secondary-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",children:[(0,n.jsx)("option",{value:"all",children:"Tous"}),(0,n.jsx)("option",{value:"scheduled",children:"Planifi\xe9s"}),(0,n.jsx)("option",{value:"confirmed",children:"Confirm\xe9s"}),(0,n.jsx)("option",{value:"completed",children:"Termin\xe9s"}),(0,n.jsx)("option",{value:"cancelled",children:"Annul\xe9s"}),(0,n.jsx)("option",{value:"no_show",children:"Absences"})]})})]}),(0,n.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,n.jsxs)("button",{onClick:w,className:"inline-flex items-center px-3 py-2 border border-secondary-300 shadow-sm text-sm leading-4 font-medium rounded-md text-secondary-700 bg-white hover:bg-secondary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,n.jsx)("svg",{className:"-ml-0.5 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Actualiser"]})})]})}),(0,n.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:h?(0,n.jsx)("div",{className:"animate-pulse p-6 space-y-6",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,n.jsx)("div",{className:"h-16 bg-secondary-100 rounded"},s))}):i.length>0?(0,n.jsx)("ul",{className:"divide-y divide-secondary-200",children:i.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)(o(),{href:"/dashboard/appointments/".concat(e.id),className:"block hover:bg-secondary-50",children:(0,n.jsxs)("div",{className:"px-4 py-4 sm:px-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-primary-600 truncate",children:e.client_name}),(0,n.jsx)("div",{className:"ml-2 flex-shrink-0 flex",children:(0,n.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(g(e.status)),children:y(e.status)})})]}),(0,n.jsxs)("div",{className:"ml-2 flex-shrink-0 flex",children:[(0,n.jsx)("svg",{className:"mr-1.5 h-5 w-5 text-secondary-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,n.jsxs)("p",{className:"text-sm text-secondary-500",children:[(0,x.p6)(e.start_time,"PPP")," \xe0 ",(0,x.p6)(e.start_time,"HH:mm")]})]})]}),(0,n.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,n.jsxs)("div",{className:"sm:flex",children:[(0,n.jsxs)("p",{className:"flex items-center text-sm text-secondary-500",children:[(0,n.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-secondary-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.client_phone]}),e.service_type&&(0,n.jsxs)("p",{className:"mt-2 flex items-center text-sm text-secondary-500 sm:mt-0 sm:ml-6",children:[(0,n.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-secondary-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.service_type]})]}),(0,n.jsxs)("div",{className:"mt-2 flex items-center text-sm text-secondary-500 sm:mt-0",children:[(0,n.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-secondary-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsxs)("p",{children:["Dur\xe9e: ",(0,x.p6)(e.start_time,"HH:mm")," - ",(0,x.p6)(e.end_time,"HH:mm")]})]})]})]})})},e.id))}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("svg",{className:"mx-auto h-12 w-12 text-secondary-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,n.jsx)("h3",{className:"mt-2 text-sm font-medium text-secondary-900",children:"Aucun rendez-vous"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-secondary-500",children:"all"!==f?'Aucun rendez-vous avec le statut "'.concat(y(f),'".'):"Vous n'avez pas encore de rendez-vous."})]})})]})]})]}):null}},390:function(e,s,t){"use strict";t.d(s,{p6:function(){return r}});var n=t(6585);function r(e,s){return(0,n.Z)(new Date(e),s)}}},function(e){e.O(0,[61,989,585,42,995,774,888,179],function(){return e(e.s=4768)}),_N_E=e.O()}]);